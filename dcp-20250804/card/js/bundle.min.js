function e(e){const t=Math.floor(e/60),n=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}document.addEventListener("DOMContentLoaded",()=>{const t=(()=>{const t=document.querySelector(".js-main-video"),n=document.querySelector(".js-video-controls"),o=n.querySelector(".js-play-or-pause"),r=n.querySelector(".js-current-time"),d=n.querySelector(".js-duration"),s=n.querySelector(".js-volume-slider"),i=n.querySelector(".js-progress-container"),l=n.querySelector(".js-progress-bar"),c=n.querySelector(".js-progress-handle");t.addEventListener("loadedmetadata",()=>{d.textContent=e(t.duration)}),o.addEventListener("click",()=>{t.paused?(t.play(),o.textContent="停止"):(t.pause(),o.textContent="再生")}),t.addEventListener("play",()=>{o.textContent="停止"}),t.addEventListener("pause",()=>{o.textContent="再生"}),t.addEventListener("timeupdate",()=>{const n=t.currentTime,o=t.duration;if(r.textContent=e(n),o>0){const e=n/o*100;l.style.width=e+"%",c.style.left=e+"%"}}),s.addEventListener("input",e=>{t.volume=parseFloat(e.target.value)}),i.addEventListener("click",e=>{const n=i.getBoundingClientRect(),o=(e.clientX-n.left)/n.width,r=t.duration;r>0&&(t.currentTime=r*o)});let a=!1;return c.addEventListener("mousedown",e=>{a=!0,e.preventDefault()}),document.addEventListener("mousemove",e=>{if(!a)return;const n=i.getBoundingClientRect(),o=Math.max(0,Math.min(e.clientX-n.left,n.width))/n.width,r=t.duration;r>0&&(l.style.width=100*o+"%",c.style.left=100*o+"%",t.currentTime=r*o)}),document.addEventListener("mouseup",()=>{a=!1}),t.addEventListener("error",e=>{console.error("エラー:",e)}),t})(),n=document.querySelector(".js-video-panel"),o=document.querySelector(".js-skip-video");o.onclick=()=>t.currentTime=30;const r=document.querySelector(".js-sub-video-panel"),d=document.querySelector(".js-replay-video");d.onclick=()=>{t.currentTime=0,t.play()};document.querySelector(".js-close-video-panel").onclick=()=>{t.currentTime=0,t.removeEventListener("timeupdate",s),n.style.display="none",document.body.classList.remove("locked_scroll")};const s=()=>{const e=t.currentTime;o.style.visibility=e>=15?"visible":"hidden",e>=30?(t.pause(),r.style.display="block"):r.style.display="none"};document.querySelector(".js-short-video").addEventListener("click",()=>{n.style.display="block",document.body.classList.add("locked_scroll"),t.addEventListener("timeupdate",s),t.play()});const i=document.querySelector(".js-sub-video-list"),l=document.querySelector(".js-sub-video1");l.addEventListener("click",()=>{l.startTime=0,l.play()}),l.addEventListener("ended",()=>{i.style.display="none",d.style.display="none"})});
